<h1>Projeto 01 - Conta Banc√°ria - ContaController - Parte III</h1>



Na etapa anterior, implementamos os 5 M√©todos do CRUD na Classe **ContaController**. Nesta √∫ltima etapa do Projeto vamos finalizar a Classe ContaController implementando os 3 M√©todos Banc√°rios (Sacar, Depositar e Transferir).

O Diagrama de Classes do nosso Projeto ficar√° da seguinte forma:

```mermaid
classDiagram
class Conta {
<<Abstract>>
  - numero : int
  - agencia : int
  - tipo : int
  - titular : string
  - saldo : decimal
  + int GetNumero()
  + int GetAgencia()
  + int GetTipo()
  + string GetTitular()
  + decimal GetSaldo()
  + void SetNumero(int numero)
  + void SetAgencia(int agencia)
  + void SetTipo(int tipo)
  + void SetTitular(string titular)
  + void SetSaldo(decimal saldo)
  + bool Sacar(decimal valor)
  + void Depositar(decimal valor)
  + void Visualizar()
}
class ContaCorrente {
  - limite : decimal
  + decimal GetLimite()
  + void SetLimite(decimal limite)
  + bool Sacar(decimal valor)
  + void Visualizar()
}
class ContaPoupanca {
  - aniversario : int
  + int GetAniversario()
  + void SetAniversario(int aniversario)
  + void Visualizar()
}
class IContaRepository{
<< Interface >>
+ void ProcurarPorNumero(int numero)
+ void ListarTodas()
+ void Cadastrar(Conta conta)
+ void Atualizar(Conta conta)
+ void Deletar(int numero)
+ void Sacar(int numero, decimal valor)
+ void Depositar(int numero, decimal valor)
+ void Transferir(int numeroOrigem, int numeroDestino, decimal valor)
}
class ContaController{
+ void ProcurarPorNumero(int numero)
+ void ListarTodas()
+ void Cadastrar(Conta conta)
+ void Atualizar(Conta conta)
+ void Deletar(int numero)
+ void Sacar(int numero, decimal valor)
+ void Depositar(int numero, decimal valor)
+ void Transferir(int numeroOrigem, int numeroDestino, decimal valor)
+ int GerarNumero()
+ Conta BuscarNaCollection(int numero)
+ int RetornaTipo(int numero)
}
Conta <|-- ContaCorrente
Conta <|-- ContaPoupanca
Conta <.. IContaRepository
IContaRepository <|.. ContaController
```

<br />

<h2>üë£ Passo 01 - Implementar o M√©todo Sacar</h2>

Na sequ√™ncia, vamos implementar o M√©todo Sacar, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/voYGToS.png" title="source: imgur.com" /></div>

**Linha 88:** Observe que na assinatura do M√©todo, foram inseridos 2 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **valor:** O valor que ser√° debitado da conta. 

**Linha 90:** Antes de Efetuar o saque na conta, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **buscaConta**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. 

O Objeto **conta** foi criado atrav√©s da palavra reservada **var**. Por infer√™ncia, a palavra reservada **var** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **BuscarNaCollection**.

**Linhas 92 a 103:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado (linha 92). 

- Se a conta foi encontrada, um novo la√ßo condicional ser√° executado para checar se o saque foi bem sucedido (linha 94). A opera√ß√£o saque ser√° efetuada atrav√©s do M√©todo **Sacar(valor)**, do tipo bool (verdadeiro ou falso). 
- Caso o saque tenha sido bem sucedido (true), ser√° exibida uma mensagem confirmando o saque (linha 95). 
- Caso o Saque **n√£o seja bem sucedido** (Saldo insuficiente), o pr√≥prio M√©todo **Sacar(valor)** exibir√° uma mensagem indicando que o Saldo da conta √© insuficiente.
- Caso a conta n√£o seja encontrada (linha 101), ser√° exibida na tela a mensagem informando que a conta n√£o foi encontrada.

Para efetuar o saque, precisamos receber o numero da Conta de origem e o valor do saque, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 02 - Inserir o M√©todo Sacar na Classe Program</h2>

Agora que implementamos o M√©todo Sacar, vamos inserir uma chamada para este M√©todo na Classe Program:

Para efetuar as opera√ß√µes banc√°rias, vamos criar algumas vari√°veis, que ir√£o armazenar temporariamente os dados da transa√ß√£o.

1. Crie as vari√°veis **numeroDestino e valor**, na Classe Program, como mostra o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/tSFwpCY.png" title="source: imgur.com" /></div>

2. Na tabela abaixo, temos detalhes das 2 vari√°veis criadas:

| Nome          | Tipo  | Descri√ß√£o                                 |
| ------------- | ----- | ----------------------------------------- |
| numeroDestino | int   | Numero da conta de destino do dep√≥sito    |
| valor         | float | Valor do saque, dep√≥sito ou transfer√™ncia |

<br />

Na sequ√™ncia, vamos criar o formul√°rio da opera√ß√£o saque e criar a chamada para o M√©todo Sacar na Classe Program

1. Na Classe Program, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/zEPeF6a.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/o9UZAtP.png" title="source: imgur.com" /></div>

**Linhas 211 a 215:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero** e **valor**.

**Linha 217:** Foi criada a chamada para o M√©todo **Sacar(numero, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 2 par√¢metros:

- **numero:** Numero da Conta onde o saque ser√° efetuado;
- **valor:** Valor que ser√° debitado da conta.

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/aVdRIDA.png" title="source: imgur.com" width="3%"/>**Run**. 

1. Ser√° aberto o Program, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/QC5Lxwa.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **6** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Digite o Numero da conta: 
1
Digite o Valor do Saque (R$): 
100

O Saque na Conta numero: 1 foi efetuado com sucesso!


Pressione Enter para Continuar...
```

No exemplo acima fizemos um saque de **R$ 100,00** na conta numero **1** e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta numero 10:

```bash
Digite o Numero da conta: 
10
Digite o Valor do Saque (R$): 
100

A Conta numero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se o saque na conta numero 1 foi efetuado com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 900.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 900,00**, confirmando que o saque foi efetuado com sucesso. 

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer um saque com um valor maior do que o Saldo da conta e um outro saque passando um valor negativo. No caso de uma Conta Corrente, lembre-se que o saldo √© composto por: saldo + limite. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<h2>üë£ Passo 03 - Implementar o M√©todo Depositar</h2>

Na sequ√™ncia, vamos implementar o M√©todo Depositar, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/QHFtEhk.png" title="source: imgur.com" /></div>

**Linha 106:** Observe que na assinatura do M√©todo, foram inseridos 2 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **valor:** O valor que ser√° debitado da conta. 

**Linha 108:** Antes de Efetuar o dep√≥sito na conta, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **conta**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. Esse Objeto foi criado atrav√©s da palavra reservada **var**. Por infer√™ncia, a palavra reservada **var** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **BuscarNaCollection**.

- **Linhas 110 a 121:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado (linha 110). 
  - Se a conta foi encontrada, a opera√ß√£o dep√≥sito ser√° efetuada atrav√©s do M√©todo **Depositar(valor)** (linha 112). 
  - Na sequ√™ncia ser√° exibida uma mensagem confirmando o dep√≥sito (linha 113). 
  - Caso a conta n√£o seja encontrada (linha 119), ser√° exibida na tela a mensagem informando que a conta n√£o foi encontrada.

Para efetuar o dep√≥sito, precisamos receber o numero da Conta de destino e o valor do dep√≥sito, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 04 - Inserir o M√©todo Depositar na Classe Program</h2>

Agora que implementamos o M√©todo Depositar, vamos criar o formul√°rio da opera√ß√£o dep√≥sito e criar a chamada para o M√©todo Depositar na Classe Program:

1. Na Classe Program, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/tZC7edg.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/XVrT2fz.png" title="source: imgur.com" /></div>

**Linhas 226 a 230:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero** e **valor**.

**Linha 202:** Foi criada a chamada para o M√©todo **Depositar(numero, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 2 par√¢metros:

- **numero:** Numero da Conta onde o dep√≥sito ser√° efetuado;
- **valor:** Valor que ser√° creditado na conta.

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/aVdRIDA.png" title="source: imgur.com" width="3%"/>**Run**. 

1. Ser√° aberto o Program, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/6OYK0D5.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **7** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Dep√≥sito

Digite o Numero da conta: 
1
Digite o Valor do Dep√≥sito (R$): 
100

O Dep√≥sito na Conta numero: 1 foi efetuado com sucesso!

Pressione Enter para Continuar...
```

No exemplo acima fizemos um dep√≥sito de **R$ 100,00** na conta numero **1** e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta numero 10:

```bash
Dep√≥sito

Digite o Numero da conta: 
10
Digite o Valor do Dep√≥sito (R$): 
100

A Conta numero: 10 n√£o foi encontrada ou a Conta destino n√£o √© uma Conta Corrente!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se o dep√≥sito na conta numero 1 foi efetuado com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 1100.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 1100,00**, confirmando que o dep√≥sito foi efetuado com sucesso. 

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer um dep√≥sito passando um valor negativo. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<h2>üë£ Passo 05 - Implementar o M√©todo Transferir</h2>

Na sequ√™ncia, vamos implementar o M√©todo Transferir, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/RXu5kM7.png" title="source: imgur.com" /></div>

**Linha 124:** Observe que na assinatura do M√©todo, foram inseridos 3 par√¢metros:

- **numeroOrigem:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **numeroDestino:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Dep√≥sito, ou seja, receber√° a Transfer√™ncia.
- **valor:** O valor que ser√° debitado da conta de origem e ser√° creditado na conta de destino. 

**Linha 126:** Antes de Efetuar o saque na conta de origem, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **contaOrigem**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. 

**Linha 127:** Antes de Efetuar o dep√≥sito na conta de destino, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **contaDestino**, para receber o Objeto da Classe Conta, que foi encontrado na Collection **listaContas**. 

- **Linhas 129 a 142:** Atrav√©s do La√ßo Condicional, verifica se os dois Objetos Conta (conta origem e conta destino) foram encontrados (linha 129). 
  - Se as 2 contas foram encontradas, um novo la√ßo condicional ser√° executado para checar se o saque na conta origem foi bem sucedido (linha 131). A opera√ß√£o saque ser√° efetuada atrav√©s do M√©todo **Sacar(valor)**, do tipo bool (verdadeiro ou falso). 
  - Caso o saque tenha sido bem sucedido, o M√©todo **Sacar(valor)** retornar√° o valor **true** (verdadeiro) . 
  - Caso o Saque **n√£o seja bem sucedido** (Saldo insuficiente), o pr√≥prio M√©todo **Sacar(valor)** exibir√° uma mensagem indicando que o Saldo da conta √© insuficiente.
  - Na sequ√™ncia, a opera√ß√£o dep√≥sito ser√° efetuada na conta destino, atrav√©s do M√©todo **Depositar(valor)** (linha 133). 
  - Se as 2 opera√ß√µes forem bem sucedidas, ser√° exibida uma mensagem confirmando a transfer√™ncia (linha 134).
  - Caso uma ou as duas contas n√£o sejam encontradas (linha 140), ser√° exibida na tela a mensagem informando que as contas n√£o foram encontradas.

Para efetuar a transfer√™ncia, precisamos receber os n√∫meros das Contas de origem e destino, al√©m do valor da transfer√™ncia, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 06 - Inserir o M√©todo Transferir na Classe Program</h2>

Agora que implementamos o M√©todo Transferir, vamos criar o formul√°rio da opera√ß√£o transfer√™ncia e criar a chamada para o M√©todo Transferir na Classe Program:

1. Na Classe Program, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/08a34WI.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/5nyfxSX.png" title="source: imgur.com" /></div>

**Linhas 241 a 248:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero**, **numeroDestino** e **valor**.

**Linha 219:** Foi criada a chamada para o M√©todo **Transferir(numeroOrigem, numeroDestino, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 3 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **numeroDestino:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Dep√≥sito, ou seja, receber√° a Transfer√™ncia.
- **valor:** O valor que ser√° debitado da conta de origem e ser√° creditado na conta de destino. 

Salve e Execute o projeto clicando no bot√£o <img src="https://i.imgur.com/aVdRIDA.png" title="source: imgur.com" width="3%"/>**Run**. 

1. Ser√° aberto o Program, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/yGuIMkb.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **6** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Transfer√™ncia entre Contas

Digite o Numero da Conta de Origem: 
1
Digite o Numero da Conta de Destino: 
2
Digite o Valor da Transfer√™ncia (R$): 
100

A Transfer√™ncia foi efetuado com sucesso!

Pressione Enter para Continuar...
```

No exemplo acima fizemos uma transfer√™ncia de **R$ 100,00** da conta numero **1** para a conta numero 2 e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta de origem numero 10:

```bash
Transfer√™ncia entre Contas

Digite o Numero da Conta de Origem: 
10
Digite o Numero da Conta de Destino: 
2
Digite o Valor da Transfer√™ncia (R$): 
100

A Conta de Origem e/ou Destino n√£o foram encontradas!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se a transfer√™ncia da conta numero 1 para a conta numero 2 foi efetuada com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 900.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 900,00**, confirmando que o saque foi efetuado com sucesso. 

3. Na sequ√™ncia, vamos checar a conta numero **2** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
2

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 2
Ag√™ncia: 124
Tipo da Conta: Conta Corrente
Titular: Maria da Silva
Saldo: 2100.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **2** foi alterado de **R$ 1000,00** para **R$ 1000,00**, confirmando que a transfer√™ncia  foi efetuada com sucesso.

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer uma transfer√™ncia com um valor maior do que o Saldo da conta de origem e uma outra transfer√™ncia passando um valor negativo. No caso de uma Conta Corrente, lembre-se que o saldo √© composto por: saldo + limite. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/csharp_conta_bancaria/blob/09_Controller_Metodos_Bancarios/controller/ContaController.cs" target="_blank"><b>C√≥digo fonte: ContaController</b></a></div>

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/csharp_conta_bancaria/blob/09_Controller_Metodos_Bancarios/Program.cs" target="_blank"><b>C√≥digo fonte: Program</b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="25px"/> <a href="https://github.com/rafaelq80/csharp_conta_bancaria/tree/09_Controller_Metodos_Bancarios" target="_blank"><b>C√≥digo fonte: Projeto Conta Banc√°ria</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
