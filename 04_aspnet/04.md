<h1>Projeto 02 - Blog Pessoal - Criar o Projeto no Visual Studio</h1>



O que veremos por aqui:

1. Apresenta√ß√£o do Projeto Blog Pessoal
2. Criar o Projeto no Visual Studio
3. Instalar os primeiros Pacotes com o Nuget
4. Configurar a Porta
5. Configurar a Classe Program

<br />

<h2>1. O Projeto Blog Pessoal</h2>



O Projeto Blog Pessoal ser√° o nosso Projeto Guia no aprendizado do Framework ASP.NET e suas principais funcionalidades. Todo o c√≥digo que implementarmos no projeto Blog Pessoal servir√° de base para a constru√ß√£o do Projeto Integrador, que sempre receber√° novas funcionalidades depois que voc√™ adquirir os conhecimentos necess√°rios atrav√©s do Projeto Blog Pessoal. Veja o Diagrama de Classes do Projeto Blog Pessoal completo na figura abaixo:

```mermaid
classDiagram
class Tema {
  - Id : long
  - Descricao : string
  - Postagem : ICollection ~Postagem~
  + GetAll()
  + GetById(long id)
  + GetByDescricao(string descricao)
  + Create(Tema tema)
  + Update(Tema tema)
  + Delete(long id)
}
class Postagem {
  - Id : Long
  - Titulo : String
  - Texto: String
  - Tema : Tema
  - Usuario : Usuario
  + GetAll()
  + GetById(long id)
  + GetByTitulo(string titulo)
  + Create(Postagem postagem)
  + Update(Postagem postagem)
  + Delete(long id)
}
class Auditable {
  - Data: DateTimeOffset
}
class User {
  - Id : long
  - Nome : string
  - Usuario : string
  - Senha : string
  - Foto : string
  - postagem : ICollection ~Postagem~
  + GetAll()
  + GetById(long id)
  + Autenticar(UsuarioLogin usuarioLogin)
  + Create(Usuario usuario)
  + Update(Usuario usuario)
}
class UsuarioLogin{
  - id : Long
  - nome : String
  - usuario : String
  - senha : String
  - foto : String
  - token : String
}
Postagem --|> Auditable: Herda
Tema <-- Postagem: Possui um
User <-- Postagem: Possui um
```

<br />

O Projeto ser√° composto por 3 Recursos (*Conjunto de Classes e Interfaces respons√°veis por mapear um tipo de Objeto e persistir no Banco de dados Relacional*).

| M√≥dulo       | Descri√ß√£o                                                    |
| ------------ | ------------------------------------------------------------ |
| **Postagem** | Recurso respons√°vel por definir o Objeto Postagem (posts) do Blog Pessoal. |
| **Tema**     | Recurso respons√°vel por classificar as postagens atrav√©s do Objeto tema. |
| **Usuario**  | Recurso respons√°vel por definir o Objeto Usuario, que ser√° utilizado pelo M√≥dulo Auth na implementa√ß√£o da seguran√ßa e na identifica√ß√£o do autor das postagens do Blog Pessoal. |

Cada Recurso ir√° gerar uma tabela no Banco de dados da aplica√ß√£o. Os Recursos ser√£o implementados na mesma sequ√™ncia da tabela acima. Veja o Diagrama de Entidade e Relacionamentos do Projeto Blog Pessoal completo. com todas as tabelas que ser√£o geradas e os respectivos relacionamentos na figura abaixo:

```mermaid
erDiagram
    Tema |o--o{ Postagem : Classifica
    Tema {
        BIGINT Id PK
        VARCHAR(255) Descricao
    }
    User |o--o{ Postagem : Cria
    User {
        BIGINT Id PK
        VARCHAR(255) Nome
        VARCHAR(255) Usuario
       	VARCHAR(255) Senha
        VARCHAR(5000) Foto
    }
    Postagem {
       	BIGINT Id PK
        VARCHAR(100) Titulo
        VARCHAR(1000) Texto
       	DATETIMEOFFSET Data
        BIGINT TemaId FK
        BIGINT UserId FK
    }
```

Antes de come√ßarmos a implementar as Classes, vamos criar o nosso Projeto ASP.NET, instalar alguns pacotes e configurar a Classe Main.

<br />

<h2>üë£ Passo 01 - Criar o Projeto com o Visual Studio</h2>




1. 
   Ao iniciar o Visual Studio IDE, ser√° aberta a tela abaixo, perguntando que voc√™ deseja fazer. Para Criar um novo Projeto, clique na op√ß√£o **Criar um projeto**. 

<div align="center">
  <img src="https://i.imgur.com/pc8tgWi.png" title="source: imgur.com" />
</div>

2. Na pr√≥xima tela, selecione o tipo de projeto que ser√° criado. Selecione a op√ß√£o **API Web do ASP.NET Core** e clique em **Pr√≥ximo** para continuar.

<div align="center">
  <img src="https://i.imgur.com/7316dEQ.png" title="source: imgur.com" />
</div>

3. Na pr√≥xima tela, vamos configurar o nosso projeto. No item **Nome do projeto**, informe o nome do projeto: **blogpessoal**. 

<div align="center">
  <img src="https://i.imgur.com/YcbRlrY.png" title="source: imgur.com" />
</div>

4. No item **Local**, **clique no bot√£o com 3 pontos** <img src="https://i.imgur.com/RVKkHqy.png" title="source: imgur.com" width="4%"/>para selecionar a pasta onde o Projeto ser√° criado.

<div align="center">
  <img src="https://i.imgur.com/6bgGozR.png" title="source: imgur.com" />
</div>

5. Localize na **√Årea de Trabalho do seu Computador** a pasta chamada **aspnet**. Na sequ√™ncia, abra a pasta **aspnet**, crie uma pasta chamada **blogpessoal**, mantenha esta pasta selecionada e clique no bot√£o **Selecionar pasta**.

<div align="center">
  <img src="https://i.imgur.com/1jQ8u3t.png" title="source: imgur.com" />
</div>

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="80px"/> | <div align="left"> **ATEN√á√ÉO:** *Todos os projetos do Bloco 02 - ASP.NET, ser√£o criados dentro da pasta aspnet. Cada novo projeto que voc√™ criar, uma nova pasta ser√° gerada dentro da pasta aspnet.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

6. Mantenha o item **Colocar a solu√ß√£o e o projeto no mesmo diret√≥rio** selecionado, como mostra a imagem abaixo e clique em **Pr√≥ximo** para continuar.

<div align="center">
  <img src="https://i.imgur.com/6QAaHlw.png" title="source: imgur.com" />
</div>

7. Na pr√≥xima tela, mantenha o item **configure igual** a imagem abaixo e clique no bot√£o **Criar**. 

<div align="center">
  <img src="https://i.imgur.com/1cVrG9Q.png" title="source: imgur.com" />
</div>

Op√ß√µes da Janela Informa√ß√µes Adicionais:

| Op√ß√£o                                    | Descri√ß√£o                                                    |
| ---------------------------------------- | ------------------------------------------------------------ |
| **Estrutura**                            | Permite escolher a vers√£o do SDK do .NET, desde que esteja instalada no computador. Mantenha a op√ß√£o padr√£o. |
| **Tipo de autentica√ß√£o**                 | Permite escolher o modo de autentica√ß√£o da aplica√ß√£o (Windows ou Plataforma Microsoft). Como iremos configurar a autentica√ß√£o por Token JWT mais adiante, vamos manter a op√ß√£o **nenhum** selecionada. |
| **Configurar HTTPS**                     | Esta op√ß√£o for√ßa a nossa API a trabalhar com o protocolo HTTPS. Localmente, em desenvolvimento, n√£o h√° necessidade de se utilizar o HTTPS, al√©m disso, quando fizermos o Deploy, o pr√≥prio servi√ßo de hospedagem far√° este trabalho para n√≥s. Mantenha esta op√ß√£o desmarcada. |
| **Habilitar o Docker**                   | Esta op√ß√£o gera o arquivo Dockerfile, que √© base para cria√ß√£o de uma imagem Docker, entretanto ao habilitar esta op√ß√£o, automaticamente ser√° exigida a instala√ß√£o do Docker, que no processo de desenvolvimento n√£o iremos utilizar. Mantenha esta op√ß√£o desmarcada. |
| **Usar Controladores**                   | Mantenha esta op√ß√£o marcada para permitir o uso de Classes Controladoras. |
| **Habilitar o suporte a OpenAPI**        | Mantenha esta op√ß√£o marcada para gerar a Documenta√ß√£o da nossa API automaticamente, atrav√©s do OpenAPI em conjunto com o Swagger. |
| **N√£o use instru√ß√µes de n√≠vel superior** | Mantenha esta op√ß√£o marcada para utilizarmos instru√ß√µes no formato tradicional. |

> **APIs m√≠nimas** √© uma abordagem simplificada para criar APIs REST r√°pidas com o ASP.NET Core. Voc√™ pode criar pontos de extremidade REST totalmente funcionais com o  m√≠nimo de codifica√ß√£o e configura√ß√£o. Declare fluentemente rotas e a√ß√µes de API ignorando todo o processo tradicional e evitar controladores  desnecess√°rios.
>
> **Instru√ß√µes de n√≠vel superior** √© um forma simplificada de escrever o c√≥digo C#, que permitem evitar a cerim√¥nia extra necess√°ria colocando o ponto de entrada do programa em um m√©todo est√°tico de uma classe. 
>
> <br />
>
> <div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/fundamentals/minimal-apis/overview?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: APIs M√≠nimas.</b></a></div>
>
> <div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/dotnet/csharp/whats-new/tutorials/top-level-statements" target="_blank"><b>Documenta√ß√£o: Instru√ß√µes de N√≠vel Superior</b></a></div>
>
> <br />

<br />

8. Ser√° aberta a janela abaixo, com o projeto criado:

<div align="center"><img src="https://i.imgur.com/23AWH4e.png" title="source: imgur.com" /></div>

<br />

<h2>üë£ Passo 02 - Excluir arquivos desnecess√°rios</h2>



Vamos excluir alguns arquivos e pastas do nosso projeto, ante de prosseguirmos:

1. No **Gerenciador de Solu√ß√µes** vamos excluir o arquivo **WeatherForecast.cs**:

<div align="center"><img src="https://i.imgur.com/blgi1fP.png" title="source: imgur.com" /></div>

2. Ainda no **Gerenciador de Solu√ß√µes** vamos excluir a pasta **Controllers**:

<div align="center"><img src="https://i.imgur.com/SUDSnWo.png" title="source: imgur.com" /></div>

3. Depois de excluir os arquivos e pastas, o projeto ficar√° com a estrutura semelhante ao da imagem abaixo:

<div align="center"><img src="https://i.imgur.com/zfelZOh.png" title="source: imgur.com" /></div>

<br />

<h2>üë£ Passo 03 - Instalar os primeiros pacotes</h2>



Para criarmos a nossa aplica√ß√£o ASP.NET com acesso a Banco de dados e outros recursos, que ser√£o implementados, precisamos instalar alguns pacotes, atrav√©s do **NUGET**. Inicialmente, vamos instalar os seguintes pacotes:


| Pacote                                      | Descri√ß√£o                                                    |
| ------------------------------------------- | ------------------------------------------------------------ |
| **Fluent Validation**                       | Pacote que fornece um conjunto de regras que permitem validar os atributos das Classes Model (veremos mais adiante). <br />**Exemplo:** No atributo Usuario o Fluent Validation checar√° se o usu√°rio digitou realmente um endere√ßo de e-mail no atributo |
| **Entity Framework Core**                   | Pacote respons√°vel por conectar e criar as tabelas no Banco de dados, al√©m de interagir com os  Objetos persistidos no Bancos de dados, atrav√©s do Mapeamento Objeto Relacional (ORM - Object Relation Mapping). Para mais detalhes, veja o conte√∫do sobre <a href="03.md" target="_blank">Entity¬†Framework</a>. |
| **Entity Framework Core SQL Server Driver** | Pacote respons√°vel por criar a conex√£o entre a nossa aplica√ß√£o e o Banco de Dados SQL Server. Se o SGBD (Postgres SQL, MySQL Server, entre outros), for alterado no futuro precisaremos instalar um novo pacote com o driver espec√≠fico para o novo SGBD. |
| **Entity Framework Core Tools**             | Pacote respons√°vel por instalar as ferramentas de gerenciamento do Entity Framework, via console. |
| **Mvc Newtonsoft Json**                     | Pacote respons√°vel por gerenciar os Objetos no formato JSON gerados (Respostas) e recebidos (Requisi√ß√µes) pela API. |

<br />

Al√©m dos pacotes acima, foram instalados na cria√ß√£o do projeto:

| Pacote          | Descri√ß√£o                                                    |
| --------------- | ------------------------------------------------------------ |
| **OpenApi**     | Pacote que habilita a gera√ß√£o autom√°tica da documenta√ß√£o da API com o Open API. |
| **Swashbuckle** | Pacote respons√°vel pela instala√ß√£o e configura√ß√£o do Swagger, que √© a Interface Gr√°fica do Open API. |

<br />

Para instalar os pacotes, vamos utilizar o **Gerenciador de Pacotes do Nuget**: 

1. Para abrir o **Gerenciador de Pacotes do Nuget** no Visual Studio, clique no Menu **Projeto ü°¢ Gerenciador de Pacotes do Nuget**

<div align="center"><img src="https://i.imgur.com/py7lAQ5.gif" title="source: imgur.com" /></div>

2. Ser√° aberta a janela do Nuget.

<div align="center"><img src="https://i.imgur.com/eHI6OL2.png" title="source: imgur.com" /></div>

3. Caso tenha alguma atualiza√ß√£o para ser instalada, observe que na **Guia Atualiza√ß√µes** aparecer√° um n√∫mero indicando o total de atualiza√ß√µes. Clique na **Guia Atualiza√ß√µes** para instalar as atualiza√ß√µes.

<div align="center"><img src="https://i.imgur.com/M7ZQ3qU.png" title="source: imgur.com" /></div>

4. Na **Guia Atualiza√ß√µes**, marque a caixa **Selecionar todos os pacotes** e clique no bot√£o **Atualizar**.

<div align="center"><img src="https://i.imgur.com/FGEAcRd.png" title="source: imgur.com" /></div>

5. Durante a instala√ß√£o, caso apare√ßa a janela **Aceita√ß√£o da Licen√ßa**, clique no bot√£o **Eu Aceito**:

<div align="center"><img src="https://i.imgur.com/9eykDaZ.png" title="source: imgur.com" /></div>

6. Atualiza√ß√£o conclu√≠da, clique na **Guia Procurar** para localizar os pacotes que ser√£o instalados:

<div align="center"><img src="https://imgur.com/QhxqhPs.png" title="source: imgur.com" /></div>

7. O primeiro pacote que vamos instalar √© o Pacote **FluentValidation**. Na caixa de texto **Pesquisar** digite o nome do pacote, selecione o pacote como mostra a imagem abaixo e na sequ√™ncia clique no bot√£o **Instalar**, localizado do lado direito da janela do Nuget.

<div align="center"><img src="https://i.imgur.com/Adkdh6n.png" title="source: imgur.com" /></div>

8. O segundo pacote que vamos instalar √© o pacote **Microsoft.EntityFrameworkCore**. Na caixa de texto **Pesquisar** digite o nome do pacote, selecione o pacote como mostra a imagem abaixo e na sequ√™ncia clique no bot√£o **Instalar**, localizado do lado direito da janela do Nuget.

<div align="center"><img src="https://i.imgur.com/FybFf7Y.png" title="source: imgur.com" /></div>

9. O terceiro pacote que vamos instalar √© o pacote **Microsoft.EntityFrameworkCore.SqlServer**. Na caixa de texto **Pesquisar** digite o nome do pacote, selecione o pacote como mostra a imagem abaixo e na sequ√™ncia clique no bot√£o **Instalar**, localizado do lado direito da janela do Nuget.

<div align="center"><img src="https://i.imgur.com/BvoF1xG.png" title="source: imgur.com" /></div>

10. O quarto pacote que vamos instalar √© o pacote **Microsoft.EntityFrameworkCore.Tools**. Na caixa de texto **Pesquisar** digite o nome do pacote, selecione o pacote como mostra a imagem abaixo e na sequ√™ncia clique no bot√£o **Instalar**, localizado do lado direito da janela do Nuget.

<div align="center"><img src="https://i.imgur.com/qE34ayw.png" title="source: imgur.com" /></div>

11. O quinto pacote que vamos instalar √© o pacote **Microsoft.AspNetCore.Mvc.NewtonsoftJson**. Na caixa de texto **Pesquisar** digite o nome do pacote, selecione o pacote como mostra a imagem abaixo e na sequ√™ncia clique no bot√£o **Instalar**, localizado do lado direito da janela do Nuget.

<div align="center"><img src="https://i.imgur.com/u8cTd1n.png" title="source: imgur.com" /></div>

12.  Ao concluir a Instala√ß√£o dos 5 pacotes, clique na **Guia Instalado** e verifique se todos os pacotes foram instalados corretamente. A **Guia Instalado** deve estar semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/QaGU7yr.png" title="source: imgur.com" /></div>

<br />

<div align="left"><img src="https://i.imgur.com/2czVisH.png" title="source: imgur.com" width="4%"/> <a href="https://www.nuget.org/packages/FluentValidation/11.6.0?_src=template" target="_blank"><b>Documenta√ß√£o: Pacote FluentValidation.</b></a></div>

<div align="left"><img src="https://i.imgur.com/2czVisH.png" title="source: imgur.com" width="4%"/> <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/7.0.9?_src=template" target="_blank"><b>Documenta√ß√£o: Pacote Entity Framework Core</b></a></div>

<div align="left"><img src="https://i.imgur.com/2czVisH.png" title="source: imgur.com" width="4%"/> <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/7.0.9?_src=template" target="_blank"><b>Documenta√ß√£o: Pacote Entity Framework Core SQL Server.</b></a></div>

<div align="left"><img src="https://i.imgur.com/2czVisH.png" title="source: imgur.com" width="4%"/> <a href="https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Tools/7.0.9?_src=template" target="_blank"><b>Documenta√ß√£o: Pacote Entity Framework Core Tools</b></a></div>

<div align="left"><img src="https://i.imgur.com/2czVisH.png" title="source: imgur.com" width="4%"/> <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson/7.0.9?_src=template" target="_blank"><b>Documenta√ß√£o: Pacote AspNetCore Mvc Newtonsoft Json</b></a></div>

<br />

<h2>üë£ Passo 04 - Configurar o Ambiente de Execu√ß√£o</h2>



O ASP.NET Core configura o comportamento do aplicativo com base no ambiente de runtime usando uma vari√°vel de ambiente. O arquivo o arquivo **launchSettings.json** √© respons√°vel por guardar estas configura√ß√µes. Inicialmente, um projeto ASP.NET vem com 2 configura√ß√µes:

- **HTTP:** Executa a aplica√ß√£o atrav√©s do Servidor **Kestrel**, que √© o servidor Web que est√° inclu√≠do por padr√£o em modelos de projeto do ASP.NET Core.
- **IIS Express:** Executa a aplica√ß√£o atrav√©s do **IIS Express (Internet Information Services)**, que √© uma vers√£o light do Servidor Web IIS.

Vamos ajustar o Projeto ASP.NET para ser executado no Ambiente Local (localhost), no servidor Kestrel, na porta **5000**:

1. No **Gerenciador de Solu√ß√µes** abra o arquivo **launchSettings.json**, localizado na pasta **Properties**:

<div align="center"><img src="https://i.imgur.com/s4BLx0H.png" title="source: imgur.com" /></div>

2. Localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/yxdtjy7.png" title="source: imgur.com" /></div>

3. Na linha 17 (**applicationUrl**), altere o endere√ßo da porta. No exemplo abaixo, **altere a porta 5206 para 5000**.

<div align="center"><img src="https://i.imgur.com/eZ1ybH5.png" title="source: imgur.com" /></div>

4. Veja abaixo o c√≥digo completo do arquivo **launchSettings.json** ap√≥s a altera√ß√£o:

```json
{
  "$schema": "https://json.schemastore.org/launchsettings.json",
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:27484",
      "sslPort": 0
    }
  },
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "http://localhost:5000",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "launchUrl": "swagger",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
```

<br />

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/fundamentals/environments?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: Ambientes</b></a></div>

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: Kestrel Server</b></a></div>

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/host-and-deploy/iis/development-time-iis-support?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: IIS Express</b></a></div>

<br />

<h2>üë£ Passo 05 - Configurando a Classe Program</h2>



A Classe **Program** √© a Classe principal da nossa aplica√ß√£o ASP.NET. Nesta Classe definimos algumas configura√ß√µes sobre como a nossa aplica√ß√£o ser√° inicializada, os servi√ßos que ser√£o carregados, entre outras. Durante o desenvolvimento do projeto, faremos outras atualiza√ß√µes e configura√ß√µes nesta Classe.

1. No **Gerenciador de Solu√ß√µes** abra a Classe **Program.cs**:

<div align="center"><img src="https://i.imgur.com/0T7E1xT.png" title="source: imgur.com" /></div>

2. Esta √© a implementa√ß√£o atual da Classe **Program.cs** conforme a imagem abaixo.

<div align="center"><img src="https://i.imgur.com/egEt7rB.png" title="source: imgur.com" /></div>

Vamos detalhar o c√≥digo:

**Linha 8:** Cria uma vari√°vel chamada **Builder**, que receber√° uma nova aplica√ß√£o WEB, criada pelo M√©todo **CreateBuilder()**, da **Classe WebApplication**.

**Linha 12:** Adiciona o **Servi√ßo Controllers**, atrav√©s do **M√©todo AddControllers()**, respons√°vel por gerenciar as Classes Controladoras da aplica√ß√£o e os respectivos endpoints (rotas), respons√°veis por acessar os M√©todos de cada recurso da aplica√ß√£o.

**Linha 17:** Adiciona o **Servi√ßo EndpointsApiExplorer**, atrav√©s do **M√©todo AddEndpointsApiExplorer()**, respons√°vel por registrar os endpoints (rotas) da aplica√ß√£o, permitindo que eles sejam expostos (acess√≠veis).

**Linha 18:** Adiciona o **Servi√ßo SwaggerGen**, atrav√©s do **M√©todo AddSwaggerGen()**, respons√°vel por gerar a documenta√ß√£o da API atrav√©s do Swagger.

**Linha 20:** Cria uma vari√°vel chamada **app**, que receber√° a aplica√ß√£o WEB, criada pelo M√©todo **CreateBuilder()**, inicializada com todas as configura√ß√µes efetuadas acima, atrav√©s do M√©todo **Build()**.

**Linhas 23 a 27:** Verifica se a aplica√ß√£o est√° em ambiente de desenvolvimento. Se estiver, inicializa os Servi√ßos **Swagger** (gera o arquivo JSON com a Documenta√ß√£o da API) e **SwaggerUI** (gera a interface gr√°fica do Swagger), atrav√©s dos M√©todos **app.UseSwagger()** e **app.UseSwaggerUI()**.

<br />

| <img src="https://i.imgur.com/RfjtOFi.png" title="source: imgur.com" width="100px"/> | <div align="left">**DICA:** *Ao executar o projeto no Visual Studio, automaticamente ser√° aberta uma janela do Navegador, que inicializar√° o Swagger. O Swagger tamb√©m poder√° ser acessado atrav√©s do endere√ßo: http://localhost:5000/swagger/index.html* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

**Linha 29:** O m√©todo **app.UseAuthorization()** √© usado para habilitar a autoriza√ß√£o em um aplicativo ASP.NET Core. Ele verifica as permiss√µes do usu√°rio (se houver uma implementa√ß√£o de seguran√ßa), antes de executar determinadas opera√ß√µes.

**Linha 32:** O m√©todo **app.MapControllers()** √© usado para mapear (identificar) todos os endpoints da aplica√ß√£o e redirecionar para a Classe Controladora respons√°vel por responder cada requisi√ß√£o recebida.

**Linha 34:** Inicializa a aplica√ß√£o atrav√©s do M√©todo **app.Run()**.

<br />

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: WebApplicationBuilder</b></a></div>

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/dotnet/api/microsoft.extensions.dependencyinjection.mvcservicecollectionextensions.addcontrollers?view=aspnetcore-7.0#microsoft-extensions-dependencyinjection-mvcservicecollectionextensions-addcontrollers(microsoft-extensions-dependencyinjection-iservicecollection)" target="_blank"><b>Documenta√ß√£o: Servi√ßo Controllers</b></a></div>

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/tutorials/getting-started-with-swashbuckle?view=aspnetcore-7.0&tabs=visual-studio" target="_blank"><b>Documenta√ß√£o: Swagger</b></a></div>

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/dotnet/api/microsoft.aspnetcore.builder.authorizationappbuilderextensions.useauthorization?view=aspnetcore-7.0" target="_blank"><b>Documenta√ß√£o: UseAuthorization</b></a></div>

<br />

2. Na sequ√™ncia, vamos inserir o trecho de c√≥digo abaixo, antes da linha 20:

```c#
// Configura√ß√£o do CORS
            builder.Services.AddCors(options => {
                options.AddPolicy(name: "MyPolicy",
                    policy =>
                    {
                        policy.AllowAnyOrigin()
                        .AllowAnyHeader()
                        .AllowAnyMethod();
                    });
            });
```

3. Adicione a linha abaixo, antes da linha **app.UseAuthorization()**:

```c#
app.UseCors("MyPolicy");
```

4. Depois de adicionar os 2 trechos, a Classe **Program** ficar√° semelhante a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/gVaGlv9.png" title="source: imgur.com" /></div>

**Linhas 20 a 29:**  Adiciona o **Servi√ßo Cors**, atrav√©s do **M√©todo AddCors()**, respons√°vel por habilitar na aplica√ß√£o o recurso chamado **Cross Origin**.

> **Cross Origin:** Indica que todas as Classes Controladoras aceitar√£o todas as requisi√ß√µes realizadas de fora do Dom√≠nio (atualmente o seu dom√≠nio √© **localhost** e futuramente o seu dom√≠nio ser√° o endere√ßo da sua aplica√ß√£o na nuvem), ao qual ela pertence. Essa propriedade √© essencial  para que o front-end, que voc√™ ir√° desenvolver no pr√≥ximo Bloco, tenha acesso √† sua aplica√ß√£o (O termo t√©cnico √© consumir a API). Al√©m de liberar todas as **Origens das requisi√ß√µes** (**AllowAnyOrigin**), na configura√ß√£o acima tamb√©m foram liberdaos os **M√©todos das Requisi√ß√µes** (**AllowAnyMethods**) e os **Cabe√ßalhos das Requisi√ß√µes** (**AllowAnyHeaders**), que em alguns casos trazem informa√ß√µes essenciais para o correto funcionamento da aplica√ß√£o. Um bom exemplo √© o **Token de Seguran√ßa**, que veremos mais √† frente em Seguran√ßa da aplica√ß√£o, que tem a fun√ß√£o de liberar o acesso √† um endpoint espec√≠fico. **Em produ√ß√£o, recomenda-se fixar o endere√ßo do deploy do front-end substituindo  o M√©todo AllowAnyOrigins() pelo M√©todo WithOrigins("endere√ßo do deploy do frontend")**.

**Linha 40: ** O m√©todo **app.UseCors()** √© usado inicializar o **Servi√ßo Cors** em toda a aplica√ß√£o.

<br />

<div align="left"><img src="https://i.imgur.com/wHTDfQ2.png" title="source: imgur.com" width="4%"/> <a href="https://learn.microsoft.com/pt-br/aspnet/core/security/cors?view=aspnetcore-7.0#enable-cors" target="_blank"><b>Documenta√ß√£o: CORS</b></a></div>

<br />

<h2>üë£ Passo 05 - Executar o Projeto ASP.NET</h2>



1. Para executarmos o Projeto, clique no bot√£o <img src="https://i.imgur.com/gPnfOVk.png" title="source: imgur.com" width="8%"/>**Run http**, na **Barra de Ferramentas Principal** (indicado em verde na imagem):

![Imagem 30](https://i.imgur.com/Ya4O50P.png)

2. Ser√° aberta uma janela do Terminal do Windows com o processamento do c√≥digo, ou seja, as mensagens da execu√ß√£o da aplica√ß√£o.

![Imagem 31](https://i.imgur.com/7DRlHkn.png)

3. Al√©m disso, ser√° aberta uma janela do seu Navegador preferido, exibindo o Swagger, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/4h3mCF8.png" title="source: imgur.com" /></div>

4. Para interromper a execu√ß√£o do Projeto, clique no bot√£o <img src="https://i.imgur.com/E2e1u9C.png" title="source: imgur.com" width="4%"/>**Parar Depura√ß√£o**, na **Barra de Ferramentas Principal** (indicado em verde na imagem). Outra forma de parar a execu√ß√£o da aplica√ß√£o √© fechando a janela do Console ou do Navegador.

![Imagem 30](https://i.imgur.com/lJayMro.png)

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="5%"/> <a href="" target="_blank"><b>C√≥digo fonte do projeto</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>