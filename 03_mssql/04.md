<h1>Diagrama Entidade Relacionamento (DER) no DB Designer</h1>



Um **Diagrama Entidade Relacionamento** (DER) √© um Fluxograma que ilustra como as ‚Äú**Entidades**‚Äù (Usu√°rios, Produtos, Postagens), se relacionam entre si dentro de um sistema de Banco de dados Relacional.

Os Diagramas DER s√£o usados principalmente para modelar e criar bancos de dados relacionais, em termos de regras l√≥gicas e regras de neg√≥cio dentro de um modelo l√≥gico de dados.

<h2>1. Componentes</h2>

**Entidade:**  Algo que pode ser definido e que pode ter dados armazenados sobre ele ‚Äî como uma pessoa, um objeto, conceito ou evento. Pense em entidades como substantivos. **Exemplos:** um cliente, estudante, carro ou produto. Normalmente representado por um ret√¢ngulo.

<div align="center"><img src="https://imgur.com/JMJHnoi.png" title="source: imgur.com" /></div>

**Relacionamento:** Como entidades atuam umas sobre as outras ou  est√£o associadas uma com a outra. Pense em relacionamentos como verbos. **Exemplo:** o estudante pode se inscrever em um curso. As duas  entidades seriam o aluno e o curso, e o relacionamento descrito √© o ato de matricular-se, assim conectando as duas entidades. Relacionamentos  s√£o tipicamente representados por linhas de liga√ß√£o.

**Cardinalidade**: Define os Atributos num√©ricos da rela√ß√£o entre duas entidades ou conjuntos de entidades. Os tr√™s  principais relacionamentos cardinais s√£o **um-para-um (1:1)**, **um-para-muitos (1:N)** e  **muitos-para-muitos (N:M)**. Um **exemplo de um-para-um** seria um estudante associado a um endere√ßo de correspond√™ncia. Um **exemplo de um-para-muitos (ou muitos-para-um, dependendo do sentido da rela√ß√£o):** um estudante se inscreve para v√°rios cursos, mas todos esses cursos t√™m uma √∫nica linha que leva de volta ao aluno. **Exemplo de muitos-para-muitos:** estudantes como um grupo s√£o associados a v√°rios membros do corpo docente, e  membros do corpo docente, por sua vez, s√£o associados a v√°rios alunos. Abaixo temos os s√≠mbolos que representam a cardinalidade:

<div align="center"><img src="https://i.imgur.com/ZVkyJnm.png" title="source: imgur.com" /></div>

Na figura abaixo, temos um exemplo de Diagrama DER com Relacionamento:

<div align="center"><img src="https://i.imgur.com/V4YbgWz.png" title="source: imgur.com" /></div>

<br />

<h2>2. Constru√≠ndo o Diagrama de Entidades e Relacionamentos com o DB Designer</h2>



O DB Designer √© uma ferramenta on-line utilizada na Modelagem de Banco de Dados e constru√ß√£o do Diagrama de Entidades e Relacionamentos. Para a modelagem do nosso Banco de dados utilizaremos a vers√£o free. Importante destacar que a **vers√£o free permite a constru√ß√£o de apenas dois projetos**.

<div align="center"><img src="https://i.imgur.com/vf8ltGb.png" title="source: imgur.com" /></div>

<br />

1. Acesse o link: <a href="https://www.dbdesigner.net/" target="_blank"><b>https://www.dbdesigner.net/</b></a>

2. Crie uma conta no site atrav√©s do bot√£o **Start design for free**

<div align="center"><img src="https://i.imgur.com/OAdc0eD.png" title="source: imgur.com" /></div>

3. Fa√ßa o seu cadastro atrav√©s do **Google** ou do **Github**.

<div align="center"><img src="https://i.imgur.com/EgL1mhn.png" title="source: imgur.com" width="65%"/></div>

4. Ap√≥s efetuar o cadastro, ser√° aberta a janela **Dashboard - DB Designer**
5. Para iniciar um novo projeto, clique no bot√£o **New Project**

<div align="center"><img src="https://i.imgur.com/8nnyhbb.png" title="source: imgur.com" /></div>

6. Ser√° aberta a Janela **Novo esquema** (New Scheme)
7. Configure conforme a janela abaixo e clique no bot√£o **CRIAR UM NOVO ESQUEMA**

<div align="center"><img src="https://i.imgur.com/8UDycRU.png" title="source: imgur.com" /></div>

<br />

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="120px"/> | <div align="left"> **ALERTA DE BSM:** Mantenha a Aten√ß√£o aos Detalhes ao criar um novo Esquema. Selecionar o Banco de Dados correto √© essencial para a constru√ß√£o do Diagrama. Caso voc√™ selecione o tipo incorreto (diferente de MS SQL Server), ser√° necess√°rio iniciar a constru√ß√£o do zero. Uma vez escolhido um tipo de Banco de Dados n√£o √© poss√≠vel alterar. </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

8. Caso n√£o esteja em Portugu√™s, clique no menu **ARQUIVO ü°¢ Propriedades...**

<div align="center"><img src="https://i.imgur.com/zbnOfVS.png" title="source: imgur.com" /></div>

9. Altere o Idioma para **Brazilian Portuguese** e clique no bot√£o **SALVAR ALTERA√á√ïES**

<div align="center"><img src="https://i.imgur.com/PrLY0L9.png" title="source: imgur.com" width="65%"/></div>

<br />

<h2>3. Criar a primeira tabela</h2>



Vamos criar a tabela **tb_categorias**:

1. Para Inserir uma nova tabela, clique no bot√£o **Nova Tabela** <img src="https://i.imgur.com/zzjruPH.png" title="source: imgur.com" width="5%"/>

<div align="center"><img src="https://i.imgur.com/G29pdaO.png" title="source: imgur.com" /></div>

2. Ser√° aberta a janela **Editar tabela: Untiled**

<div align="center"><img src="https://i.imgur.com/JAlHSGQ.png" title="source: imgur.com" /></div>

3. Vamos configurar o **Nome da tabela (tb_categorias)** e definir a Cor da Tabela, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/zXl2M9j.png" title="source: imgur.com" /></div>

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="80px"/> | <div align="left"> **ATEN√á√ÉO:** *Vamos utilizar um √∫nica cor para todas as tabelas.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

4. Vamos configurar o primeiro Atributo (**Id**), que √© Chave Prim√°ria da tabela, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/Wh9DOcZ.png" title="source: imgur.com" /></div>

Observe que definimos a cor amarela, para identificar a Chave Prim√°ria da tabela.

5. Para adicionar um novo atributo na tabela, clique no bot√£o **+**, localizado no final da linha do atributo **Id**.

<div align="center"><img src="https://i.imgur.com/tN27y1K.png" title="source: imgur.com" /></div>

6. Ser√° adicionado um novo atributo na tabela, logo abaixo do atributo **Id**.

<div align="center"><img src="https://i.imgur.com/C5pWYrk.png" title="source: imgur.com" /></div>

7. Configure o novo atributo igual a imagem abaixo e clique em **Salvar** para concluir a tabela **tb_categorias**.

<div align="center"><img src="https://i.imgur.com/pIy0i93.png" title="source: imgur.com" /></div>

8. Ap√≥s Salvar a tabela, veremos este resultado na tela:

<div align="center"><img src="https://i.imgur.com/AtIJHsD.png" title="source: imgur.com" /></div>

<br />

<h2>4. Criar a segunda e a terceira tabela</h2>



Vamos criar a tabela **tb_usuarios**:

1. Para Inserir uma nova tabela, clique no bot√£o **Nova Tabela** <img src="https://i.imgur.com/zzjruPH.png" title="source: imgur.com" width="5%"/>

<div align="center"><img src="https://i.imgur.com/G29pdaO.png" title="source: imgur.com" /></div>

2. Configure a tabela **tb_usuarios** igual a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/FVAskI2.png" title="source: imgur.com" /></div>

3. Salve a tabela clicando no bot√£o **Salvar** e veja o resultado na tela:

<div align="center"><img src="https://i.imgur.com/9gGypRC.png" title="source: imgur.com" /></div>

<br />

Vamos criar a tabela **tb_produtos**:

1. Para Inserir uma nova tabela, clique no bot√£o **Nova Tabela** <img src="https://i.imgur.com/zzjruPH.png" title="source: imgur.com" width="5%"/>

<div align="center"><img src="https://i.imgur.com/G29pdaO.png" title="source: imgur.com" /></div>

2. Configure a tabela **tb_produtos** igual a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/qLqmAWw.png" title="source: imgur.com" /></div>

3. Salve a tabela clicando no bot√£o **Salvar** e veja o resultado na tela:

<div align="center"><img src="https://i.imgur.com/opPm2mS.png" title="source: imgur.com" /></div>

<br />

<h2>5. Criar os Relacionametos entre as tabelas</h2>



Para criarmos os Relacionamentos, precisamos adicionar os atributos que ser√£o as Chaves Estrangeiras aa Tabela **tb_produtos** (**CategoriaId e UsuarioId**). Durante a cria√ß√£o dos atributos, vamos configurar os Relacionamentos:

1. Para criar a **Chave Estrangeira** d√™ um duplo clique sobre a Tabela **tb_produtos**.
2. Ser√° aberta a Janela **Editar tabela: tb_produtos**

<div align="center"><img src="https://i.imgur.com/t4PFq74.png" title="source: imgur.com" /></div>

3. Para adicionar um novo atributo na tabela, clique no bot√£o **+**, localizado no final da linha do atributo **Foto**.

<div align="center"><img src="https://i.imgur.com/tN27y1K.png" title="source: imgur.com" /></div>

4. Configure o atributo conforme a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/Jd52HlK.png" title="source: imgur.com" /></div>

5. Para criar o Relacionamento da tabela tb_produtos com a tabela tb_categorias, no atributo **CategoriaId**, marque a op√ß√£o **Chave Estrangeira**. Na sequ√™ncia, no Item **Tabela de Refer√™ncia**, selecione a tabela **tb_categorias**, no item **Campo de Refer√™ncia**, selecione o atributo **Chave Prim√°ria** da tabela tb_categorias (**Id**), no item **Tipo de Relacionamento**, selecione o tipo **muitos para um** e para finalizar, selecione a **cor laranja**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/RTkzyzD.png" title="source: imgur.com" /></div>

6. Para criar o Relacionamento da tabela tb_produtos com a tabela tb_usuarios, no atributo **UsuarioId**, marque a op√ß√£o **Chave Estrangeira**. Na sequ√™ncia, no Item **Tabela de Refer√™ncia**, selecione a tabela **tb_usuarios**, no item **Campo de Refer√™ncia**, selecione o atributo **Chave Prim√°ria** da tabela tb_usuarios (**Id**), no item **Tipo de Relacionamento**, selecione o tipo **muitos para um** e para finalizar, selecione a **cor laranja**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/21vDVhu.png" title="source: imgur.com" /></div>

7. Salve a tabela clicando no bot√£o **Salvar** e veja o resultado na tela:

<div align="center"><img src="https://i.imgur.com/vf8ltGb.png" title="source: imgur.com" /></div>

8. Caso as linhas do Relacionamento n√£o estejam vis√≠veis, clique no menu **EXIBIR ü°¢ Alternar Relacionamentos**

<div align="center"><img src="https://i.imgur.com/3HR6OTb.png" title="source: imgur.com" /></div>

<br />

<h2>6. Exportar o Diagrama</h2>



1. Ap√≥s concluir o Diagrama, salve o projeto atrav√©s do menu **ARQUIVO  ü°¢ Salvar**
2. Exporte o Diagrama no formato **PDF** atrav√©s do menu **Exportar ü°¢ Exportar PDF** e fa√ßa o download do arquivo.
3. Exporte o Diagrama no formato **PNG** atrav√©s do menu **Exportar ü°¢ Exportar Imagem** e fa√ßa o download do arquivo.
4. Para finalizar, vamos Gerar o c√≥digo **SQL** do diagrama atrav√©s do menu **Exportar ü°¢ SQL** e fa√ßa o download do arquivo.
5. O C√≥digo SQL ser√° semelhante ao c√≥digo abaixo. Observe que adicionamos manualmente o trecho de c√≥digo que cria e seleciona o Banco de dados.

```sql
-- Trecho adicionado Manualmente
CREATE DATABASE db_games;
GO

USE db_games;
GO

-- Fim do trecho
CREATE TABLE [tb_categorias] (
	Id bigint NOT NULL,
	Tipo varchar(255) NOT NULL,
  CONSTRAINT [PK_TB_CATEGORIAS] PRIMARY KEY CLUSTERED
  (
  [Id] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [tb_usuarios] (
	Id bigint NOT NULL,
	Nome varchar(255) NOT NULL,
	Usuario varchar(255) NOT NULL,
	Senha varchar(255) NOT NULL,
	Foto varchar(5000),
	DataNascimento date NOT NULL,
  CONSTRAINT [PK_TB_USUARIOS] PRIMARY KEY CLUSTERED
  (
  [Id] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO
CREATE TABLE [tb_produtos] (
	Id bigint NOT NULL,
	Nome varchar(255) NOT NULL,
	Descricao varchar(500),
	Console varchar(255) NOT NULL,
	Quantidade int,
	Preco decimal(8,2) NOT NULL,
	Foto varchar(5000) NOT NULL,
	CategoriaId bigint NOT NULL,
	UsuarioId bigint NOT NULL,
  CONSTRAINT [PK_TB_PRODUTOS] PRIMARY KEY CLUSTERED
  (
  [Id] ASC
  ) WITH (IGNORE_DUP_KEY = OFF)

)
GO


ALTER TABLE [tb_produtos] WITH CHECK ADD CONSTRAINT [tb_produtos_fk0] FOREIGN KEY ([CategoriaId]) REFERENCES [tb_categorias]([Id])
ON UPDATE CASCADE
GO
ALTER TABLE [tb_produtos] CHECK CONSTRAINT [tb_produtos_fk0]
GO
ALTER TABLE [tb_produtos] WITH CHECK ADD CONSTRAINT [tb_produtos_fk1] FOREIGN KEY ([UsuarioId]) REFERENCES [tb_usuarios]([Id])
ON UPDATE CASCADE
GO
ALTER TABLE [tb_produtos] CHECK CONSTRAINT [tb_produtos_fk1]
GO
```

Com o c√≥digo SQL acima, voc√™ poder√° criar toda a estrutura do Banco de dados da loja de games.

**A Constru√ß√£o do Diagrama est√° Conclu√≠da!**

<br />

<h2>Engenharia Reversa</h2>



O DB Designer oferece o recurso de Engenharia Reversa, ou seja, a partir de um c√≥digo SQL ele tamb√©m consegue criar o DER automaticamente.

1. Para iniciar um novo projeto, clique no bot√£o **New Project** no Dashboard


<div align="center"><img src="https://i.imgur.com/8nnyhbb.png" title="source: imgur.com" /></div>

2. Ser√° aberta a Janela **Novo esquema** (New Scheme)
3. Configure conforme a janela abaixo e clique no bot√£o **CRIAR UM NOVO ESQUEMA**

<div align="center"><img src="https://i.imgur.com/HZLIXCt.png" title="source: imgur.com" /></div>

4. Para criar um Novo Diagrama utilizando a Engenharia Reversa, na Barra de Ferramentas, clique no bot√£o **Importar** 

5. Ser√° aberta a janela Importar SQL

<div align="center"><img src="https://i.imgur.com/GfLRzPQ.png" title="source: imgur.com" /></div>

6. Cole o c√≥digo SQL no item **SQL**, conforme a figura abaixo:

<div align="center"><img src="https://i.imgur.com/Sf41s0E.png" title="source: imgur.com" /></div>

7. Clique no Bot√£o **Import SQL** para concluir.

8. O Diagrama ser√° gerado automaticamente, como mostra a figura abaixo:

<div align="center"><img src="https://i.imgur.com/7exrYA3.png" title="source: imgur.com" /></div>

Diagrama criado, agora √© s√≥ fazer os ajustes visuais, conferir os dados e finalizar.

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
